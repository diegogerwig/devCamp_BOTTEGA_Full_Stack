<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêç</text></svg>" />
    <title>Constructores en Python - Documentaci√≥n</title>
    <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>
    <header>
        <h1>Constructores en Python</h1>
        <p>Inicializaci√≥n y Creaci√≥n de Objetos</p>
    </header>

    <nav>
        <a href="../index.html">‚Üê Volver al √≠ndice</a>
    </nav>

    <div class="container">
        <section>
            <h2>¬øQu√© es un Constructor en Python?</h2>
            <p>En Python, los constructores son m√©todos especiales que se ejecutan autom√°ticamente cuando se crea una nueva instancia de una clase. A diferencia de otros lenguajes de programaci√≥n, Python proporciona dos mecanismos distintos para la creaci√≥n e inicializaci√≥n de objetos:</p>

            <ul>
                <li><strong>__new__:</strong> Es el verdadero constructor que crea la instancia</li>
                <li><strong>__init__:</strong> Es el inicializador que configura la instancia creada</li>
            </ul>

            <p>Esta separaci√≥n entre creaci√≥n e inicializaci√≥n proporciona una gran flexibilidad en el control de la instanciaci√≥n de objetos, permitiendo patrones avanzados como el Singleton o la creaci√≥n de inmutables.</p>

            <div class="example">
                <h3>Constructor B√°sico</h3>
                <pre><code>class Persona:
    def __init__(self, nombre, edad):
        self.nombre = nombre
        self.edad = edad
        self.inicializar_datos()
    
    def inicializar_datos(self):
        self.adulto = self.edad >= 18
        self.fecha_creacion = datetime.now()

# Uso del constructor
persona = Persona("Ana", 25)</code></pre>
            </div>
        </section>

        <section>
            <h2>El M√©todo __init__</h2>
            <p>El m√©todo __init__ es el inicializador m√°s com√∫nmente usado en Python. Es responsable de configurar el estado inicial de un objeto despu√©s de su creaci√≥n. Sus caracter√≠sticas principales son:</p>

            <ul>
                <li><strong>Ejecuci√≥n Autom√°tica:</strong> Se llama autom√°ticamente despu√©s de crear la instancia</li>
                <li><strong>Configuraci√≥n Inicial:</strong> Establece el estado inicial del objeto</li>
                <li><strong>Validaci√≥n de Datos:</strong> Puede validar los argumentos de inicializaci√≥n</li>
                <li><strong>No Retorna Valor:</strong> Cualquier valor de retorno ser√° ignorado</li>
            </ul>

            <p>El m√©todo __init__ es fundamental para garantizar que un objeto comience su vida en un estado v√°lido y consistente. Es el lugar apropiado para:</p>

            <ul>
                <li>Inicializar atributos de instancia</li>
                <li>Realizar validaciones de par√°metros</li>
                <li>Establecer conexiones o recursos necesarios</li>
                <li>Realizar c√°lculos iniciales</li>
                <li>Registrar la creaci√≥n del objeto</li>
            </ul>

            <div class="example">
                <h3>Inicializaci√≥n Avanzada</h3>
                <pre><code>class CuentaBancaria:
    def __init__(self, titular, saldo_inicial=0):
        if saldo_inicial < 0:
            raise ValueError("El saldo inicial no puede ser negativo")
        
        self.titular = titular
        self._saldo = saldo_inicial
        self._movimientos = []
        self._fecha_apertura = datetime.now()
        self._activa = True
        
        self._registrar_apertura()</code></pre>
            </div>
        </section>

        <section>
            <h2>El M√©todo __new__</h2>
            <p>El m√©todo __new__ es el verdadero constructor en Python. Es un m√©todo est√°tico que se llama antes que __init__ y es responsable de crear y devolver la nueva instancia del objeto. Sus caracter√≠sticas principales son:</p>

            <ul>
                <li><strong>Control de Creaci√≥n:</strong> Permite controlar c√≥mo se crean las instancias</li>
                <li><strong>M√©todo Est√°tico:</strong> No recibe self como primer argumento</li>
                <li><strong>Debe Retornar:</strong> Debe devolver la nueva instancia</li>
                <li><strong>Raramente Sobrescrito:</strong> Solo necesario en casos especiales</li>
            </ul>

            <p>Los casos comunes para sobrescribir __new__ incluyen:</p>

            <ul>
                <li>Implementaci√≥n del patr√≥n Singleton</li>
                <li>Creaci√≥n de objetos inmutables</li>
                <li>Cach√© de instancias</li>
                <li>Modificaci√≥n del tipo de la instancia creada</li>
                <li>Control fino sobre la asignaci√≥n de memoria</li>
            </ul>

            <div class="example">
                <h3>Implementaci√≥n de Singleton</h3>
                <pre><code>class Singleton:
    _instancia = None

    def __new__(cls, *args, **kwargs):
        if cls._instancia is None:
            cls._instancia = super().__new__(cls)
        return cls._instancia

    def __init__(self, valor=None):
        # __init__ se llamar√° en cada intento de creaci√≥n
        if not hasattr(self, 'inicializado'):
            self.valor = valor
            self.inicializado = True</code></pre>
            </div>
        </section>

        <section>
            <h2>Patrones y T√©cnicas Avanzadas</h2>
            <p>Los constructores en Python permiten implementar varios patrones de dise√±o y t√©cnicas avanzadas:</p>

            <h3>Constructores Alternativos</h3>
            <p>Python permite definir m√∫ltiples formas de crear objetos mediante m√©todos de clase:</p>

            <div class="example">
                <pre><code>class Fecha:
    def __init__(self, a√±o, mes, dia):
        self.a√±o = a√±o
        self.mes = mes
        self.dia = dia

    @classmethod
    def desde_string(cls, fecha_str):
        """Constructor alternativo que acepta una fecha en formato 'YYYY-MM-DD'"""
        a√±o, mes, dia = map(int, fecha_str.split('-'))
        return cls(a√±o, mes, dia)

    @classmethod
    def hoy(cls):
        """Constructor alternativo que crea una fecha con la fecha actual"""
        from datetime import date
        fecha_actual = date.today()
        return cls(fecha_actual.year, fecha_actual.month, fecha_actual.day)</code></pre>
            </div>

            <h3>Constructores Seguros</h3>
            <p>Es posible implementar constructores que garanticen la creaci√≥n de objetos en un estado v√°lido:</p>

            <div class="example">
                <pre><code>class Conexion:
    def __init__(self, host, puerto):
        self.host = host
        self.puerto = puerto
        self.conectado = False
        self._socket = None

    @classmethod
    def crear_segura(cls, host, puerto):
        """Constructor que verifica la conexi√≥n antes de crear el objeto"""
        # Verificar que el host y puerto son v√°lidos
        if not cls._validar_host(host):
            raise ValueError(f"Host inv√°lido: {host}")
        if not cls._validar_puerto(puerto):
            raise ValueError(f"Puerto inv√°lido: {puerto}")

        # Crear la instancia
        conexion = cls(host, puerto)
        
        # Intentar establecer la conexi√≥n
        try:
            conexion._conectar()
            return conexion
        except Exception as e:
            raise ConnectionError(f"No se pudo establecer la conexi√≥n: {e}")

    @staticmethod
    def _validar_host(host):
        # L√≥gica de validaci√≥n del host
        pass

    @staticmethod
    def _validar_puerto(puerto):
        return isinstance(puerto, int) and 0 <= puerto <= 65535</code></pre>
            </div>
        </section>

        <section>
            <h2>Mejores Pr√°cticas</h2>
            <div class="tip">
                <strong>Recomendaciones para el dise√±o de constructores:</strong>
                <ul>
                    <li>Mant√©n los constructores simples y enfocados en la inicializaci√≥n b√°sica</li>
                    <li>Realiza validaciones de par√°metros al inicio del constructor</li>
                    <li>Utiliza valores por defecto para par√°metros opcionales</li>
                    <li>Documenta claramente los par√°metros y su prop√≥sito</li>
                    <li>Considera proporcionar constructores alternativos para diferentes casos de uso</li>
                    <li>Evita la l√≥gica compleja en __init__; mu√©vela a m√©todos auxiliares</li>
                    <li>Aseg√∫rate de que el objeto quede en un estado v√°lido despu√©s de la construcci√≥n</li>
                </ul>
            </div>
        </section>

        <section>
            <h2>Recursos Adicionales</h2>
            <ul>
                <li><a href="https://docs.python.org/3/reference/datamodel.html#object.__new__">Documentaci√≥n oficial de Python sobre __new__</a></li>
                <li><a href="https://docs.python.org/3/reference/datamodel.html#object.__init__">Documentaci√≥n oficial de Python sobre __init__</a></li>
            </ul>
        </section>
    </div>
</body>
</html>